<!-- Create Order Modal -->
<div class="modal fade order-modal" id="createOrderModal" tabindex="-1" role="dialog" aria-labelledby="createOrderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-fullscreen" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createOrderModalLabel">Create New Order</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="createOrderForm">
                    <div class="row">
                        <!-- Customer Information -->
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Customer Information</h6>
                                </div>
                                <div class="card-body">
                                    <div class="form-group">
                                        <label>Select Customer</label>
                                        <div class="d-flex">
                                            <div id="customerLookup" class="flex-grow-1"></div>
                                            <button type="button" class="btn btn-primary ml-2" id="addNewCustomerBtn">
                                                + New Customer
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Selected Customer Details -->
                                    <div id="customerDetails"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Order Information -->
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6 class="mb-0">Order Information</h6>
                                </div>
                                <div class="card-body">
                                    <!-- <div class="form-group">
                                        <label for="orderNumber">Order Number</label>
                                        <input type="text" class="form-control" id="orderNumber" name="orderNumber" required>
                                    </div> -->
                                    <div class="form-group">
                                        <label for="input-office">Office</label>
                                        <select class="form-control" id="input-office" name="officeId" required>
                                            <option value="">Select Office</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="expectedDeliveryDate">Expected Delivery Date</label>
                                        <input type="date" class="form-control" id="expectedDeliveryDate" name="expectedDeliveryDate" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="status">Status</label>
                                        <select class="form-control" id="status" name="status" required>
                                            <option value="pending">Pending</option>
                                            <option value="confirmed">Confirmed</option>
                                            <option value="in_production">In Production</option>
                                            <option value="completed">Completed</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="paymentStatus">Payment Status</label>
                                        <select class="form-control" id="paymentStatus" name="paymentStatus" required>
                                            <option value="unpaid">Unpaid</option>
                                            <option value="partial">Partial</option>
                                            <option value="paid">Paid</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="orderLabelInput">Label</label>
                                        <input type="text" class="form-control" id="orderLabelInput" name="label" placeholder="Enter label (optional)">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Order Items -->
                    <div class="order-items-section">
                        <h6 class="heading-small text-muted mb-4">Order Items</h6>
                        <div class="item-details-form">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Product</label>
                                        <select class="form-control" id="productSelect">
                                            <option value="">Select Product</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>Quantity</label>
                                        <input type="number" class="form-control" id="itemQuantity" min="1" value="1">
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>Size</label>
                                        <select class="form-control" id="itemSize">
                                            <option value="">Select Size</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>Color</label>
                                        <select class="form-control" id="itemColor">
                                            <option value="">Select Color</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>&nbsp;</label>
                                        <button type="button" class="btn btn-primary btn-block" id="addItemBtn">
                                            <i class="fas fa-plus"></i> Add Item
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Order Items Grid -->
                        <div id="orderItemsGrid" class="order-items-grid"></div>

                        <!-- Order Summary -->
                        <div class="order-summary">
                            <div class="row">
                                <div class="col-md-6 offset-md-6">
                                    <div class="order-summary-row">
                                        <span>Subtotal:</span>
                                        <span class="subtotal-value">$0.00</span>
                                        <input type="hidden" name="subtotal" value="0">
                                    </div>
                                    <div class="order-summary-row">
                                        <span>Discount:</span>
                                        <div class="input-group">
                                            <input type="number" class="form-control form-control-sm text-right" id="input-discount" name="discountAmount" value="0" min="0">
                                            <div class="input-group-append">
                                                <span class="input-group-text">IDR</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="order-summary-row">
                                        <span>Total:</span>
                                        <span class="total-value">$0.00</span>
                                        <input type="hidden" name="totalAmount" value="0">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h6 class="mb-0">Additional Notes</h6>
                        </div>
                        <div class="card-body">
                            <div class="form-group">
                                <textarea class="form-control" id="notes" name="notes" rows="3" placeholder="Enter any additional notes or special instructions..."></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveOrder">Create Order</button>
            </div>
        </div>
    </div>
</div>

<!-- New Customer Modal -->
<div class="modal fade" id="newCustomerModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New Customer</h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <div class="form-group">
                        <label>Name <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" name="name" required>
                    </div>
                    <div class="form-group">
                        <label>Email <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" name="email" required>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">+</span>
                            </div>
                            <input type="tel" class="form-control" name="phone" placeholder="e.g. 6281234567890">
                        </div>
                        <small class="form-text text-muted">Enter phone number with country code without '+' symbol</small>
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <textarea class="form-control" name="address" rows="3" placeholder="Enter complete address"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>City</label>
                                <input type="text" class="form-control" name="city" placeholder="Enter city">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Postal Code</label>
                                <input type="text" class="form-control" name="postal_code" placeholder="Enter postal code">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea class="form-control" name="notes" rows="2" placeholder="Enter additional notes (optional)"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveCustomer">Save Customer</button>
            </div>
        </div>
    </div>
</div> 