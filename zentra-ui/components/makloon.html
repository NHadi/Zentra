<!-- Statistics Row -->
<div class="row">
    <div class="col-xl-3 col-md-6">
        <div class="card card-stats">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Total Makloon</h5>
                        <span class="h2 font-weight-bold mb-0" id="totalMakloon">0</span>
                    </div>
                    <div class="col-auto">
                        <div class="icon icon-shape bg-gradient-primary text-white rounded-circle shadow">
                            <i class="ni ni-building"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card card-stats">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Active</h5>
                        <span class="h2 font-weight-bold mb-0" id="activeMakloon">0</span>
                    </div>
                    <div class="col-auto">
                        <div class="icon icon-shape bg-gradient-success text-white rounded-circle shadow">
                            <i class="ni ni-check-bold"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card card-stats">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Total Capacity</h5>
                        <span class="h2 font-weight-bold mb-0" id="totalCapacity">0</span>
                    </div>
                    <div class="col-auto">
                        <div class="icon icon-shape bg-gradient-warning text-white rounded-circle shadow">
                            <i class="ni ni-chart-bar-32"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6">
        <div class="card card-stats">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h5 class="card-title text-uppercase text-muted mb-0">Available Capacity</h5>
                        <span class="h2 font-weight-bold mb-0" id="availableCapacity">0</span>
                    </div>
                    <div class="col-auto">
                        <div class="icon icon-shape bg-gradient-info text-white rounded-circle shadow">
                            <i class="ni ni-delivery-fast"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Grid Section -->
<div class="row mt-4">
    <div class="col">
        <div class="card">
            <!-- Card header -->
            <div class="card-header border-0">
                <div class="row align-items-center">
                    <div class="col">
                        <h3 class="mb-0">Makloon Partners</h3>
                    </div>
                </div>
            </div>
            <!-- Grid container with relative positioning -->
            <div class="position-relative">
                <!-- Loading Indicator -->
                <div id="makloonGridLoader" class="grid-loader">
                    <div class="loader-content">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted">Loading makloon data...</p>
                    </div>
                </div>
                <!-- Grid -->
                <div id="makloonGrid"></div>
            </div>
        </div>
    </div>
</div>

<!-- Makloon Details Modal -->
<div class="modal fade" id="makloonDetailsModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="makloonDetailsModalLabel">Makloon Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body p-0">
                <!-- Modal Loading Indicator -->
                <div id="makloonDetailsLoader" class="modal-loader">
                    <div class="loader-content">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                        <p class="mt-2 text-muted">Loading makloon details...</p>
                    </div>
                </div>
                <!-- Modal Content -->
                <div id="makloonDetailsContent" style="display: none;">
                    <!-- Tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-tab="makloonInfo" role="tab">
                                <i class="ni ni-building mr-2"></i>Basic Info
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-tab="capacityInfo" role="tab">
                                <i class="ni ni-chart-bar-32 mr-2"></i>Capacity
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-tab="productionInfo" role="tab">
                                <i class="ni ni-settings mr-2"></i>Production
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-tab="productionTracking" role="tab">
                                <i class="ni ni-app mr-2"></i>Production Tracking
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-tab="timeline" role="tab">
                                <i class="ni ni-time-alarm mr-2"></i>History
                            </a>
                        </li>
                    </ul>

                    <!-- Tab Content -->
                    <div class="tab-content p-4">
                        <!-- Basic Info Tab -->
                        <div class="tab-pane fade show active" id="makloonInfo" role="tabpanel">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Name</label>
                                        <p id="makloonName" class="h4 mb-3"></p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Code</label>
                                        <p id="makloonCode" class="makloon-code mb-3"></p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Contact Person</label>
                                        <p id="makloonContactPerson" class="mb-3"></p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Specialization</label>
                                        <p id="makloonSpecialization" class="mb-3"></p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Email</label>
                                        <p id="makloonEmail" class="contact-info mb-3"></p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Phone</label>
                                        <p id="makloonPhone" class="contact-info mb-3"></p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Address</label>
                                        <p id="makloonAddress" class="mb-3"></p>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-control-label text-muted">Status</label>
                                        <p id="makloonStatus" class="mb-3"></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Capacity Info Tab -->
                        <div class="tab-pane fade" id="capacityInfo" role="tabpanel">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card shadow-none border">
                                        <div class="card-body">
                                            <h6 class="heading-small text-muted mb-4">Production Capacity</h6>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label class="form-control-label text-muted">Daily Capacity</label>
                                                        <p id="dailyCapacity" class="h4 mb-3"></p>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="form-control-label text-muted">Monthly Capacity</label>
                                                        <p id="monthlyCapacity" class="h4 mb-3"></p>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label class="form-control-label text-muted">Current Load</label>
                                                        <p id="currentLoad" class="h4 mb-3"></p>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="form-control-label text-muted">Available Capacity</label>
                                                        <p id="availableCapacityDetail" class="h4 mb-3"></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Production Info Tab -->
                        <div class="tab-pane fade" id="productionInfo" role="tabpanel">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card shadow-none border">
                                        <div class="card-body">
                                            <h6 class="heading-small text-muted mb-4">Production Capabilities</h6>
                                            <div id="productionCapabilities"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Production Tracking Tab -->
                        <div class="tab-pane fade" id="productionTracking" role="tabpanel">
                            <div class="row">
                                <div class="col-12">
                                    <div class="card shadow-none border">
                                        <div class="card-header bg-transparent">
                                            <div class="row align-items-center">
                                                <div class="col">
                                                    <h6 class="text-uppercase text-muted ls-1 mb-1">Production Progress</h6>
                                                    <h5 class="h3 mb-0">Current Orders</h5>
                                                </div>
                                                <div class="col-auto">
                                                    <button class="btn btn-sm btn-primary" id="refreshProductionBtn">
                                                        <i class="fas fa-sync-alt"></i> Refresh
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <!-- Production Orders Table -->
                                            <div class="table-responsive">
                                                <table class="table align-items-center">
                                                    <thead class="thead-light">
                                                        <tr>
                                                            <th scope="col">Order ID</th>
                                                            <th scope="col">Product</th>
                                                            <th scope="col">Quantity</th>
                                                            <th scope="col">Status</th>
                                                            <th scope="col">Progress</th>
                                                            <th scope="col">Actions</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="productionOrdersList">
                                                        <!-- Sample Order -->
                                                        <tr>
                                                            <td>ORD-001</td>
                                                            <td>Football Jersey - Home Kit</td>
                                                            <td>100 pcs</td>
                                                            <td>
                                                                <span class="badge badge-dot mr-4">
                                                                    <i class="bg-warning"></i>
                                                                    <span>In Production</span>
                                                                </span>
                                                            </td>
                                                            <td>
                                                                <div class="d-flex align-items-center">
                                                                    <span class="mr-2">60%</span>
                                                                    <div>
                                                                        <div class="progress">
                                                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 60%"></div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <button class="btn btn-sm btn-info" onclick="showProductionDetails('ORD-001')">
                                                                    View Details
                                                                </button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>

                                            <!-- Production Stages -->
                                            <div class="mt-5">
                                                <h6 class="text-uppercase text-muted ls-1 mb-4">Production Stages</h6>
                                                <div class="production-stages">
                                                    <!-- Cutting Stage -->
                                                    <div class="stage-card">
                                                        <div class="stage-icon bg-primary">
                                                            <i class="fas fa-cut"></i>
                                                        </div>
                                                        <div class="stage-info">
                                                            <h4>Cutting</h4>
                                                            <div class="stage-stats">
                                                                <div class="stat">
                                                                    <span class="stat-label">In Queue</span>
                                                                    <span class="stat-value">3</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">In Progress</span>
                                                                    <span class="stat-value">2</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">Completed</span>
                                                                    <span class="stat-value">45</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Printing Stage -->
                                                    <div class="stage-card">
                                                        <div class="stage-icon bg-info">
                                                            <i class="fas fa-print"></i>
                                                        </div>
                                                        <div class="stage-info">
                                                            <h4>Printing</h4>
                                                            <div class="stage-stats">
                                                                <div class="stat">
                                                                    <span class="stat-label">In Queue</span>
                                                                    <span class="stat-value">5</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">In Progress</span>
                                                                    <span class="stat-value">1</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">Completed</span>
                                                                    <span class="stat-value">42</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Sewing Stage -->
                                                    <div class="stage-card">
                                                        <div class="stage-icon bg-success">
                                                            <i class="fas fa-pencil-ruler"></i>
                                                        </div>
                                                        <div class="stage-info">
                                                            <h4>Sewing</h4>
                                                            <div class="stage-stats">
                                                                <div class="stat">
                                                                    <span class="stat-label">In Queue</span>
                                                                    <span class="stat-value">4</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">In Progress</span>
                                                                    <span class="stat-value">3</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">Completed</span>
                                                                    <span class="stat-value">40</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- QC Stage -->
                                                    <div class="stage-card">
                                                        <div class="stage-icon bg-warning">
                                                            <i class="fas fa-clipboard-check"></i>
                                                        </div>
                                                        <div class="stage-info">
                                                            <h4>Quality Control</h4>
                                                            <div class="stage-stats">
                                                                <div class="stat">
                                                                    <span class="stat-label">In Queue</span>
                                                                    <span class="stat-value">2</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">In Progress</span>
                                                                    <span class="stat-value">1</span>
                                                                </div>
                                                                <div class="stat">
                                                                    <span class="stat-label">Completed</span>
                                                                    <span class="stat-value">38</span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Timeline Tab -->
                        <div class="tab-pane fade" id="timeline" role="tabpanel">
                            <div class="makloon-timeline"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<style>
/* Loading Indicators */
.grid-loader,
.modal-loader {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 300px;
    width: 100%;
    background: rgba(255, 255, 255, 0.9);
}

.modal-loader {
    min-height: 400px;
}

.loader-content {
    text-align: center;
}

.loader-content .spinner-border {
    width: 3rem;
    height: 3rem;
}

/* Fade In Animation */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.fade-in {
    animation: fadeIn 0.3s ease-in-out;
}

/* ... existing styles ... */

.production-stages {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 1rem;
}

.stage-card {
    display: flex;
    align-items: flex-start;
    padding: 1.5rem;
    background: white;
    border-radius: 0.5rem;
    box-shadow: 0 0 1rem rgba(136, 152, 170, 0.1);
    border: 1px solid #e9ecef;
}

.stage-icon {
    width: 3rem;
    height: 3rem;
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
}

.stage-icon i {
    color: white;
    font-size: 1.25rem;
}

.stage-info {
    flex: 1;
}

.stage-info h4 {
    margin: 0 0 1rem;
    font-size: 1rem;
    font-weight: 600;
}

.stage-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
}

.stat {
    text-align: center;
    padding: 0.5rem;
    background: #f8f9fe;
    border-radius: 0.375rem;
}

.stat-label {
    display: block;
    font-size: 0.75rem;
    color: #8898aa;
    margin-bottom: 0.25rem;
}

.stat-value {
    font-size: 1rem;
    font-weight: 600;
    color: #525f7f;
}

.progress {
    height: 0.5rem;
    width: 120px;
}
</style> 